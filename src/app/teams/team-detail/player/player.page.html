<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button fill="clear" (click)="dismiss()">
                <ion-icon name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title *ngIf="data">{{data.last_name}} {{data.first_name}}</ion-title>
        <ion-title *ngIf="!data">Nový hráč</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="history()">
                <ion-icon name="book"></ion-icon>
            </ion-button>
            <ion-button (click)="save()" [disabled]="!form.valid">
                <ion-icon name="save"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form [formGroup]="form">
        <ion-grid>
            <ion-row *ngIf="!data">
                <ion-col>
                    Nejdříve si důkladně ověř, zda zadávaný hráč již v Evidenci neexistuje pomoci Vyhledávání hráče v zadávání soupisek
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col col-6>
                    <ion-item>
                        <ion-label position="stacked">Jméno</ion-label>
                        <ion-input type="text" formControlName="first_name"></ion-input>
                    </ion-item>
                </ion-col>
                <ion-col col-6>
                    <ion-item>
                        <ion-label position="stacked">Příjmení</ion-label>
                        <ion-input type="text" formControlName="last_name"></ion-input>
                    </ion-item>
                </ion-col>
            </ion-row>
            <ion-col col-6>
                <ion-item>
                    <ion-label position="stacked">Datum narození</ion-label>
                    <ion-datetime display-format="DD.MM YYYY" formControlName="birth_date"></ion-datetime>
                </ion-item>
            </ion-col>
            <ion-col col-6>
                <ion-radio-group formControlName="sex">
                    <ion-list-header>
                        Pohlaví
                    </ion-list-header>
                    <ion-item>
                        <ion-label>muž</ion-label>
                        <ion-radio value="male"></ion-radio>
                    </ion-item>
                    <ion-item>
                        <ion-label>žena</ion-label>
                        <ion-radio value="female"></ion-radio>
                    </ion-item>
                </ion-radio-group>
            </ion-col>
            <ion-col col-6>
                <ion-item>
                    <ion-label position="stacked">E-mail</ion-label>
                    <ion-input type="email" formControlName="email"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col col-6>
                <ion-item>
                    <ion-label position="stacked">Národnost</ion-label>
                    <ion-select formControlName="nationality_id">
                        <ion-select-option *ngFor="let nationality of nationalityProvider.data"
                                           value="{{nationality.id}}">{{nationality.name}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
            <ion-col col-6 *ngIf="auth.user.isAdmin()">
                <ion-item>
                    <ion-label position="stacked">Oddíl</ion-label>
                    <ion-select formControlName="team">
                        <ion-select-option [selected]="team.id == t.id" *ngFor="let t of teamProvider.data|order:['name']" [value]="t.id">{{t.name}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
                <ion-item>
                    <ion-label position="stacked">Změna oddílu k sezoně</ion-label>
                    <ion-select formControlName="season_id">
                        <ion-select-option *ngFor="let t of seasonProvider.data|order:['-name']" [value]="t.id">{{t.name}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-col>
        </ion-grid>
    </form>

    <ion-card *ngIf="auth.user.isAdmin() && data">
        <ion-card-header>Odpuštění poplatku</ion-card-header>
        <ion-card-content>
            <ion-item>
                <ion-label>Sezona</ion-label>
                <ion-select [(ngModel)]="pardon_fee_season">
                    <ion-select-option [selected]="seasonProvider.data[0]" [value]="season" *ngFor="let season of seasonProvider.data">{{season.name}}
                    </ion-select-option>
                </ion-select>
            </ion-item>
            <ion-row>
                <ion-col>
                    <ion-button expand="full" size="small" color='success' (click)="pardonFee()">Odpustit</ion-button>
                </ion-col>
                <!--<ion-col>-->
                    <!--<ion-button expand="full" size="small" color='danger' (click)="revokePardonFee()">Zrušit odpustek</ion-button>-->
                <!--</ion-col>-->
            </ion-row>
        </ion-card-content>
    </ion-card>
</ion-content>
